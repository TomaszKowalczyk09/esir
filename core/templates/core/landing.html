{% extends 'core/base.html' %}

{% block title %}Elektroniczny System Informacji i Rady{% endblock %}

{% block extra_head %}
<style>
  .landing-hero {
    position: relative;
    overflow: hidden;
    background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.35)),
                radial-gradient(1200px 500px at 15% 10%, rgba(13,110,253,.20), transparent 55%),
                radial-gradient(900px 420px at 90% 20%, rgba(25,135,84,.18), transparent 55%),
                #111827;
    border-radius: 0;
    min-height: 100vh;
  }
  .landing-hero::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?auto=format&fit=crop&w=1800&q=60');
    background-size: cover;
    background-position: center;
    filter: blur(0px);
    transform: scale(1.02);
    opacity: .55;
  }
  .landing-hero .hero-content {
    position: relative;
    z-index: 1;
  }

  .feature-tile {
    border: 1px solid rgba(15, 23, 42, 0.10);
    border-radius: 14px;
    background: #fff;
    height: 100%;
    transition: transform .12s ease, box-shadow .12s ease;
    box-shadow: 0 10px 22px rgba(2, 6, 23, 0.06);
  }
  .feature-tile:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 30px rgba(2, 6, 23, 0.10);
  }
  .feature-icon {
    width: 44px;
    height: 44px;
    border-radius: 12px;
    display: grid;
    place-items: center;
    background: rgba(13,110,253,.10);
    color: #0b2a55;
  }
  .feature-list {
    margin: .75rem 0 0 0;
    padding-left: 1.1rem;
  }
  .feature-list li {
    margin: .25rem 0;
  }

  /* oddechy dla sekcji full width */
  .landing-section {
    padding: 2.25rem 1rem;
  }
  @media (min-width: 768px) {
    .landing-section { padding: 3.25rem 2.25rem; }
  }
  @media (min-width: 1200px) {
    .landing-section { padding: 4rem 4rem; }
  }

  /* FAQ jak na screenie */
  .landing-faq {
    background: #ffffff; /* tło całej sekcji białe */
  }
  .landing-faq .faq-surface {
    background: #f3f4f6; /* szara powierzchnia pod accordion */
    padding: 3rem 1rem;
  }
  @media (min-width: 768px) {
    .landing-faq .faq-surface { padding: 3.5rem 1rem; }
  }

  .landing-faq .faq-wrap {
    max-width: 820px;
    margin: 0 auto;
  }

  .landing-faq .faq-kicker {
    color: #0d6efd; /* było: #e11d48 */
    font-weight: 500;
  }
  .landing-faq .accordion {
    --bs-accordion-bg: transparent;
    --bs-accordion-border-color: transparent;
    --bs-accordion-btn-bg: #ffffff;
    --bs-accordion-active-bg: #ffffff;
    --bs-accordion-btn-focus-box-shadow: none;
    --bs-accordion-btn-color: #0d6efd; /* było: #e11d48 */
    --bs-accordion-active-color: #0d6efd; /* było: #e11d48 */
    --bs-accordion-btn-padding-y: 1.35rem;
    --bs-accordion-btn-padding-x: 1.6rem;
    --bs-accordion-body-padding-x: 1.6rem;
    --bs-accordion-body-padding-y: 1.1rem;
  }
  .landing-faq .accordion-item {
    background: transparent;
    border: 0;
    margin-bottom: 1.1rem;
  }
  .landing-faq .accordion-button {
    border-radius: 0;
    font-weight: 500;
    letter-spacing: .2px;
    box-shadow: 0 12px 26px rgba(2, 6, 23, 0.08);
  }
  .landing-faq .accordion-button::after {
    background-size: 1.1rem;
    filter: none;
  }
  .landing-faq .accordion-body {
    background: #ffffff;
    box-shadow: 0 12px 26px rgba(2, 6, 23, 0.08);
    border-top: 1px solid rgba(15,23,42,.06);
  }

  .features-header {
    max-width: 980px;
  }
  .features-cta {
    border: 1px solid rgba(13,110,253,.20);
    background: linear-gradient(180deg, rgba(13,110,253,.06), rgba(13,110,253,.02));
    border-radius: 16px;
  }
</style>
{% endblock %}

{% block content %}
<div class="m-0 p-0">

  <section class="landing-hero d-flex align-items-center">
    <div class="hero-content w-100 landing-section text-center">
      <div class="d-flex justify-content-center align-items-center gap-3 mb-3">
        <div class="display-6 fw-semibold text-white">e‑SIR</div>
        <span class="badge text-bg-primary">Elektroniczna obsługa sesji</span>
      </div>

      <h1 class="display-5 fw-semibold text-white mb-3">Nowoczesna obsługa Rady i Komisji</h1>
      <p class="lead text-white-50 mb-0" style="max-width: 70ch; margin: 0 auto;">
        Porządek obrad, głosowania, quorum, wnioski i dokumentacja — w jednym miejscu,
        z podziałem na role: radny, prezydium, administrator.
      </p>

      <div class="d-flex flex-column flex-sm-row justify-content-center gap-2 gap-sm-3 mt-4">
        <a class="btn btn-primary btn-lg" href="{% url 'login' %}">
          <i class="bi bi-box-arrow-in-right me-2"></i>Zaloguj się
        </a>
        <a class="btn btn-outline-light btn-lg" href="#funkcjonalnosci">
          Dowiedz się więcej
        </a>
      </div>

      <div class="text-white-50 small mt-3">
        Dostęp wymaga konta przydzielonego przez administratora.
      </div>
    </div>
  </section>

  <section id="funkcjonalnosci" class="landing-section">
    <div class="d-flex align-items-end justify-content-between flex-wrap gap-3">
      <div class="features-header">
        <h2 class="display-6 mb-1">Funkcjonalności</h2>
        <div class="text-muted">
          Najważniejsze elementy obsługi sesji, które skracają czas pracy i porządkują procesy.
        </div>
      </div>
      <div class="d-flex gap-2">
        <a class="btn btn-sm btn-outline-primary" href="{% url 'pomoc' %}">Dokumentacja</a>
        <a class="btn btn-sm btn-primary" href="{% url 'login' %}">Zaloguj się</a>
      </div>
    </div>

    <div class="row g-3 g-md-4 mt-2">
      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon"><i class="bi bi-check2-square"></i></div>
            <div>
              <div class="fw-semibold">Głosowania</div>
              <div class="text-muted small">Obsługa jawnych i tajnych głosowań + liczenie wyników.</div>
              <ul class="feature-list text-muted small">
                <li>otwieranie/zamykanie przez operatora</li>
                <li>wyniki w czasie rzeczywistym</li>
                <li>archiwum i podgląd wyników</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon" style="background: rgba(25,135,84,.10);"><i class="bi bi-person-check"></i></div>
            <div>
              <div class="fw-semibold">Obecność i quorum</div>
              <div class="text-muted small">Szybka weryfikacja obecności i spełnienia quorum.</div>
              <ul class="feature-list text-muted small">
                <li>potwierdzanie obecności przez radnych</li>
                <li>przegląd na żywo dla prezydium</li>
                <li>gotowe raporty obecności</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon" style="background: rgba(111,66,193,.10);"><i class="bi bi-journal-text"></i></div>
            <div>
              <div class="fw-semibold">Wnioski</div>
              <div class="text-muted small">Zgłoszenia radnych z obiegiem akceptacji i historią zmian.</div>
              <ul class="feature-list text-muted small">
                <li>składanie wniosków online</li>
                <li>akceptacja przez prezydium</li>
                <li>eksport i archiwizacja</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon" style="background: rgba(13,202,240,.12);"><i class="bi bi-diagram-3"></i></div>
            <div>
              <div class="fw-semibold">Komisje</div>
              <div class="text-muted small">Obsługa prac komisji i przekazywanie spraw do rady.</div>
              <ul class="feature-list text-muted small">
                <li>powiązanie z sesjami i punktami</li>
                <li>wyodrębnione wnioski komisji</li>
                <li>wspólny obieg dokumentów</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon" style="background: rgba(253,126,20,.14);"><i class="bi bi-calendar-range"></i></div>
            <div>
              <div class="fw-semibold">Sesje i agenda</div>
              <div class="text-muted small">Planowanie posiedzeń i prowadzenie porządku obrad.</div>
              <ul class="feature-list text-muted small">
                <li>publikacja porządku punktów</li>
                <li>oznaczanie aktywnego punktu</li>
                <li>historia sesji</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="feature-tile p-3 p-md-4">
          <div class="d-flex gap-3">
            <div class="feature-icon" style="background: rgba(32,201,151,.14);"><i class="bi bi-shield-check"></i></div>
            <div>
              <div class="fw-semibold">Role i uprawnienia</div>
              <div class="text-muted small">Podział na radny / prezydium / administrator.</div>
              <ul class="feature-list text-muted small">
                <li>ekrany dopasowane do roli</li>
                <li>kontrola dostępu do akcji</li>
                <li>bezpieczne logowanie</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="features-cta p-3 p-md-4 mt-4 d-flex flex-column flex-md-row align-items-start align-items-md-center justify-content-between gap-3">
      <div>
        <div class="fw-semibold">Chcesz zobaczyć system w działaniu?</div>
        <div class="text-muted small">Zaloguj się kontem przydzielonym przez administratora.</div>
      </div>
      <div class="d-flex gap-2">
        <a class="btn btn-primary" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right me-2"></i>Zaloguj się</a>
        <a class="btn btn-outline-primary" href="{% url 'pomoc' %}">Zobacz FAQ</a>
      </div>
    </div>
  </section>

  <section class="landing-section landing-faq" id="faq" style="padding-top: 5.25rem; padding-bottom: 0;">
    <div class="text-center">
      <h2 class="display-5 mb-1" style="letter-spacing: .6px;">FAQ</h2>
      <div class="faq-kicker h4 mb-5">Najczęściej zadawane pytania</div>
    </div>

    <div class="faq-surface">
      <div class="faq-wrap">
        <div class="accordion" id="landingFaq">
          <div class="accordion-item">
            <h2 class="accordion-header" id="faqOneH">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne" aria-expanded="false" aria-controls="faqOne">
                Kto może korzystać z e‑SIR?
              </button>
            </h2>
            <div id="faqOne" class="accordion-collapse collapse" aria-labelledby="faqOneH" data-bs-parent="#landingFaq">
              <div class="accordion-body text-start text-muted">
                Użytkownicy z rolami systemowymi: radny, prezydium lub administrator. Konto zakłada administrator.
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="faqTwoH">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                Gdzie zobaczę aktualne głosowania?
              </button>
            </h2>
            <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoH" data-bs-parent="#landingFaq">
              <div class="accordion-body text-start text-muted">
                Po zalogowaniu przejdź do panelu. Radni widzą listę otwartych głosowań dla aktywnej sesji.
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="faqThreeH">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faqThree" aria-expanded="true" aria-controls="faqThree">
                Czy wyniki głosowań mogą być tajne?
              </button>
            </h2>
            <div id="faqThree" class="accordion-collapse collapse show" aria-labelledby="faqThreeH" data-bs-parent="#landingFaq">
              <div class="accordion-body text-start text-muted">
                Tak. Przy głosowaniach tajnych w trakcie trwania nie są ujawniane wyniki szczegółowe.
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="faqFourH">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFour" aria-expanded="false" aria-controls="faqFour">
                Czy mogę oddać głos więcej niż raz?
              </button>
            </h2>
            <div id="faqFour" class="accordion-collapse collapse" aria-labelledby="faqFourH" data-bs-parent="#landingFaq">
              <div class="accordion-body text-start text-muted">
                Nie. System blokuje ponowne oddanie głosu w tym samym głosowaniu.
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <div class="text-center text-muted small py-4">
    e‑SIR • <span id="landingYear"></span>
  </div>

</div>
{% endblock %}

{% block extra_js %}
<script>
  (function () {
    const y = document.getElementById('landingYear');
    if (y) y.textContent = String(new Date().getFullYear());
  })();
</script>
{% endblock %}
